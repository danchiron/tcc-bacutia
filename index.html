<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCC Pablo Salvato | Bacutia Metam√≥rfica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0b1020;
            --card: rgba(16, 25, 49, 0.75);
            --card-soft: rgba(30, 42, 73, 0.55);
            --line: rgba(126, 158, 255, 0.25);
            --text: #e9ecff;
            --muted: #b3bce6;
            --primary: #7c8cff;
            --accent: #ff7e9f;
            --warm: #ffb067;
        }

        * { box-sizing: border-box; }
        html, body { margin: 0; }
        body {
            font-family: 'Inter', sans-serif;
            color: var(--text);
            background:
                radial-gradient(circle at 20% 10%, #27356e 0%, transparent 40%),
                radial-gradient(circle at 80% 0%, #5b2c63 0%, transparent 35%),
                radial-gradient(circle at 50% 100%, #2e4b72 0%, transparent 45%),
                var(--bg);
            scroll-behavior: smooth;
        }

        h1, h2, h3, h4 { font-family: 'Playfair Display', serif; }

        .glass {
            backdrop-filter: blur(12px);
            background: var(--card);
            border: 1px solid var(--line);
            border-radius: 1rem;
            box-shadow: 0 20px 35px rgba(5, 8, 20, 0.35);
        }

        .hero-grid {
            background-image: linear-gradient(rgba(255,255,255,.05) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,.05) 1px, transparent 1px);
            background-size: 28px 28px;
        }

        .tab-btn {
            border: 1px solid transparent;
            transition: all .25s ease;
        }

        .active-tab {
            background: linear-gradient(90deg, rgba(124,140,255,0.3), rgba(255,126,159,0.25));
            border-color: rgba(169,182,255,0.45);
            color: #ffffff;
        }

        .inactive-tab {
            background: rgba(10, 17, 35, 0.55);
            border-color: rgba(145, 157, 194, 0.18);
            color: var(--muted);
        }

        .inactive-tab:hover {
            color: #fff;
            border-color: rgba(169,182,255,0.45);
        }

        .metric-pill {
            background: linear-gradient(120deg, rgba(124,140,255,.18), rgba(255,176,103,.18));
            border: 1px solid rgba(177, 193, 255, .3);
        }

        .chart-container { position: relative; height: 300px; }

        .chat-message { padding: .75rem; border-radius: .85rem; margin-bottom: .5rem; max-width: 85%; animation: fadeIn .3s ease; }
        .user-msg { background: rgba(124,140,255,.28); margin-left: auto; }
        .ai-msg { background: rgba(255,126,159,.2); border-left: 3px solid var(--accent); }

        .typing-indicator::after { content: '...'; animation: ellipsis 1.5s infinite; }

        .slider-container {
            position: relative;
            width: 100%;
            max-width: 640px;
            height: 380px;
            overflow: hidden;
            margin: 0 auto;
            border-radius: 1rem;
            border: 1px solid rgba(145, 157, 194, .3);
            box-shadow: 0 18px 35px rgba(0,0,0,.3);
        }

        .img-fundo,
        .img-frente {
            width: 100%;
            height: 100%;
            position: absolute;
            background-size: cover;
            background-position: center;
        }

        .img-fundo {
            background-image: linear-gradient(45deg, rgba(9, 15, 31, .5), rgba(9, 15, 31, .2)), url('https://placehold.co/1200x700/4b5d88/f8d9ba?text=Afloramento+PS02+-+Bacutia');
        }

        .img-frente {
            width: 50%;
            border-right: 3px solid #fff;
            background-image: linear-gradient(45deg, rgba(132, 37, 60, .3), rgba(54, 10, 41, .2)), url('https://placehold.co/1200x700/84253c/f9f2f4?text=Fotomicrografia+Grt1+e+Grt2');
            z-index: 2;
        }

        .slider-control { position: absolute; width: 100%; height: 100%; opacity: 0; cursor: ew-resize; z-index: 10; margin: 0; }

        @keyframes ellipsis { 0% { content: '.'; } 33% { content: '..'; } 66% { content: '...'; } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <header class="hero-grid border-b border-indigo-200/20">
        <div class="max-w-6xl mx-auto px-4 py-14">
            <div class="glass p-8 md:p-10">
                <p class="uppercase tracking-[.25em] text-xs text-indigo-200 mb-3">Projeto Interativo do TCC</p>
                <h1 class="text-3xl md:text-5xl font-bold leading-tight">A evolu√ß√£o metam√≥rfica da <span class="text-rose-300">Praia da Bacutia</span></h1>
                <p class="text-indigo-100/90 mt-4 text-base md:text-lg max-w-3xl">Uma vers√£o mais moderna do estudo de <strong>Pablo Salvato</strong> sobre anatexia, trajet√≥ria P-T e gera√ß√£o de granadas perit√©ticas na Faixa Ara√ßua√≠.</p>
                <div class="mt-8 grid sm:grid-cols-3 gap-3 text-sm">
                    <div class="metric-pill rounded-xl p-3"><i class="fa-solid fa-temperature-full mr-2 text-orange-300"></i> Pico t√©rmico: <strong>750‚Äì850¬∞C</strong></div>
                    <div class="metric-pill rounded-xl p-3"><i class="fa-solid fa-gem mr-2 text-rose-300"></i> Grt1 e Grt2 como registro-chave</div>
                    <div class="metric-pill rounded-xl p-3"><i class="fa-solid fa-earth-americas mr-2 text-cyan-300"></i> Contexto Gondwana e colis√£o Brasil-√Åfrica</div>
                </div>
            </div>
        </div>
    </header>

    <nav class="sticky top-0 z-50 backdrop-blur-lg bg-slate-900/70 border-b border-indigo-100/10">
        <div class="max-w-6xl mx-auto px-4 py-3 flex justify-center gap-2 flex-wrap">
            <button onclick="switchTab('general')" id="tab-general" class="tab-btn active-tab px-5 py-2 rounded-full font-semibold"><i class="fa-solid fa-compass mr-2"></i>Vis√£o geral</button>
            <button onclick="switchTab('academic')" id="tab-academic" class="tab-btn inactive-tab px-5 py-2 rounded-full font-semibold"><i class="fa-solid fa-microscope mr-2"></i>An√°lise t√©cnica</button>
            <button onclick="switchTab('kids')" id="tab-kids" class="tab-btn inactive-tab px-5 py-2 rounded-full font-semibold"><i class="fa-solid fa-flask mr-2"></i>Laborat√≥rio</button>
        </div>
    </nav>

    <main class="flex-grow max-w-6xl w-full mx-auto px-4 py-10 space-y-10">
        <section id="view-general" class="space-y-8">
            <div class="glass p-8 text-center">
                <h2 class="text-2xl md:text-4xl mb-4">Voc√™ est√° sobre a raiz de um antigo or√≥geno</h2>
                <p class="text-indigo-100/90 max-w-4xl mx-auto">A Bacutia preserva sinais da colis√£o continental que ajudou a formar Gondwana. O TCC demonstra como o metamorfismo de alto grau levou √† fus√£o parcial e ao crescimento de granadas em diferentes gera√ß√µes.</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-6">
                <article class="glass p-6">
                    <h3 class="text-2xl mb-4"><i class="fa-solid fa-map-location-dot text-cyan-300 mr-2"></i>Cen√°rio tect√¥nico</h3>
                    <p class="text-indigo-100/90 mb-4">A regi√£o representa uma zona profunda da crosta durante a evolu√ß√£o da Faixa Ara√ßua√≠. O registro petrogr√°fico indica soterramento, aquecimento e descompress√£o associados a eventos colisionais.</p>
                    <div class="rounded-xl p-4 bg-slate-900/40 border border-indigo-100/10 text-sm text-indigo-100/80">
                        <strong class="text-indigo-100">Insight do TCC:</strong> granadas Grt1 preservam inclus√µes e evid√™ncias pr√©-pico, enquanto Grt2 registra condi√ß√µes pr√≥ximas √† anatexia.
                    </div>
                </article>

                <article class="glass p-6">
                    <h3 class="text-2xl mb-4"><i class="fa-solid fa-maximize text-rose-300 mr-2"></i>Lupa comparativa</h3>
                    <div class="slider-container">
                        <div class="img-fundo"></div>
                        <div id="imgFront" class="img-frente"></div>
                        <input type="range" id="sliderControl" class="slider-control" min="0" max="100" value="50">
                    </div>
                </article>
            </div>
        </section>

        <section id="view-academic" class="hidden">
            <div class="grid lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 space-y-6">
                    <div class="glass p-6">
                        <h3 class="text-2xl mb-3"><i class="fa-solid fa-chart-line text-indigo-300 mr-2"></i>Dados-chave do trabalho</h3>
                        <p class="text-indigo-100/90 mb-4">As visualiza√ß√µes resumem a progress√£o metam√≥rfica com destaque para o aumento de granada no pico e posterior retrometamorfismo.</p>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-slate-950/30 rounded-xl p-4 border border-indigo-100/10"><div class="chart-container"><canvas id="mineralChart"></canvas></div></div>
                            <div class="bg-slate-950/30 rounded-xl p-4 border border-indigo-100/10"><div class="chart-container"><canvas id="ptPathChart"></canvas></div></div>
                        </div>
                    </div>
                    <div class="glass p-6">
                        <h4 class="text-xl mb-3"><i class="fa-solid fa-fire text-orange-300 mr-2"></i>Interpreta√ß√£o metam√≥rfica</h4>
                        <ul class="list-disc pl-5 text-indigo-100/90 space-y-2">
                            <li>Prot√≥lito sedimentar submetido a soterramento progressivo.</li>
                            <li>Pico t√©rmico com in√≠cio de fus√£o parcial por quebra de biotita em presen√ßa de quartzo/plagiocl√°sio.</li>
                            <li>Gera√ß√£o de l√≠quidos anat√©ticos e cristaliza√ß√£o de granada perit√©tica (Grt2).</li>
                        </ul>
                    </div>
                </div>
                <aside class="glass p-5 flex flex-col h-[560px]">
                    <h4 class="text-xl mb-4 text-center">Assistente t√©cnico do TCC</h4>
                    <div id="academic-chat-output" class="flex-grow overflow-y-auto rounded-lg p-3 bg-slate-950/30 border border-indigo-100/10 text-sm"></div>
                    <div class="mt-4 flex gap-2">
                        <input id="academic-chat-input" type="text" placeholder="Pergunte sobre P-T, granada, anatexia..." class="flex-grow rounded-lg px-3 py-2 bg-slate-900/80 border border-indigo-200/20" onkeypress="handleEnter(event, 'academic')">
                        <button onclick="askGemini('academic')" class="px-4 rounded-lg bg-indigo-500 hover:bg-indigo-400 transition"><i class="fa-solid fa-paper-plane"></i></button>
                    </div>
                </aside>
            </div>
        </section>

        <section id="view-kids" class="hidden space-y-6">
            <div class="glass p-8">
                <h3 class="text-3xl mb-2 text-center">Laborat√≥rio da Dona Granada üåã</h3>
                <p class="text-center text-indigo-100/80 mb-8">Explore a mesma faixa de temperatura discutida no TCC e veja quando a rocha come√ßa a fundir.</p>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div class="space-y-5">
                        <label class="block font-semibold text-lg">Temperatura: <span id="valTemp">20</span>¬∞C</label>
                        <input type="range" id="tempSlider" min="20" max="900" value="20" class="w-full accent-rose-500" oninput="atualizarSimulacao()">
                        <div class="rounded-xl p-4 bg-slate-900/40 border border-indigo-100/10 min-h-[110px]">
                            <h4 id="rock-status-title" class="text-xl">Sedimento inicial</h4>
                            <p id="rock-status-desc" class="text-indigo-100/85 text-sm mt-1">Aperte o calor para iniciar o metamorfismo.</p>
                        </div>
                    </div>
                    <div class="flex justify-center">
                        <canvas id="rockCanvas" width="280" height="280" class="rounded-full border border-indigo-100/20 bg-slate-900/40"></canvas>
                    </div>
                </div>
            </div>

            <div class="glass p-5 max-w-xl mx-auto h-[480px] flex flex-col">
                <h4 class="text-center text-xl mb-3">Chat da Dona Granada ‚ú®</h4>
                <div id="kids-chat-output" class="flex-grow overflow-y-auto rounded-lg p-3 bg-slate-950/30 border border-indigo-100/10"></div>
                <div class="mt-4 flex gap-2">
                    <input id="kids-chat-input" type="text" placeholder="Oi, Dona Granada!" class="flex-grow rounded-full px-4 py-2 bg-slate-900/80 border border-indigo-200/20" onkeypress="handleEnter(event, 'kids')">
                    <button onclick="askGemini('kids')" class="w-11 h-11 rounded-full bg-rose-400 hover:bg-rose-300 text-slate-900 font-bold">‚ú®</button>
                </div>
            </div>
        </section>
    </main>

    <footer class="border-t border-indigo-100/10 py-7 text-center text-indigo-200/80 text-sm">
        <p class="font-semibold">TCC Interativo ‚Äî Pablo Salvato</p>
        <p class="opacity-80">Design modernizado com base no tema: metamorfismo de alto grau na Bacutia.</p>
    </footer>

    <script>
        const apiKey = "AIzaSyDcHaFb2wVSyxpodcoy6lr1_hW5TKAVQDI";
        const tabs = ['general', 'academic', 'kids'];

        document.getElementById('sliderControl').addEventListener('input', (e) => {
            document.getElementById('imgFront').style.width = `${e.target.value}%`;
        });

        function switchTab(tabId) {
            tabs.forEach((id) => {
                document.getElementById(`view-${id}`).classList.add('hidden');
                const tab = document.getElementById(`tab-${id}`);
                tab.classList.remove('active-tab');
                tab.classList.add('inactive-tab');
            });
            document.getElementById(`view-${tabId}`).classList.remove('hidden');
            const current = document.getElementById(`tab-${tabId}`);
            current.classList.remove('inactive-tab');
            current.classList.add('active-tab');
        }

        function handleEnter(e, mode) {
            if (e.key === 'Enter') askGemini(mode);
        }

        const canvas = document.getElementById('rockCanvas');
        const ctx = canvas.getContext('2d');

        function atualizarSimulacao() {
            const temp = parseInt(document.getElementById('tempSlider').value, 10);
            document.getElementById('valTemp').innerText = temp;
            const title = document.getElementById('rock-status-title');
            const desc = document.getElementById('rock-status-desc');

            ctx.clearRect(0, 0, 280, 280);

            if (temp < 200) {
                ctx.fillStyle = '#6b4c32';
                title.innerText = 'Lama de bacia';
                desc.innerText = 'Sedimento ainda pouco consolidado em ambiente tect√¥nico ativo.';
            } else if (temp < 750) {
                ctx.fillStyle = '#7c8cff';
                title.innerText = 'Gnaisse em evolu√ß√£o';
                desc.innerText = 'A rocha est√° s√≥lida e foliada, com crescimento mineral progressivo.';
                ctx.strokeStyle = '#dbe1ff';
                ctx.lineWidth = 2;
                for (let i = 0; i < 10; i += 1) {
                    ctx.beginPath();
                    ctx.moveTo(35, 65 + i * 15);
                    ctx.lineTo(245, 65 + i * 15);
                    ctx.stroke();
                }
            } else {
                ctx.fillStyle = '#ff8855';
                title.innerText = 'Migmatito em anatexia';
                desc.innerText = 'Faixa de 750¬∞C+: fus√£o parcial e cristaliza√ß√£o de granadas perit√©ticas (Grt2).';
                ctx.shadowBlur = 12;
                ctx.shadowColor = '#ffd27a';
                for (let i = 0; i < 8; i += 1) {
                    ctx.fillStyle = '#b01c45';
                    ctx.beginPath();
                    ctx.arc(60 + Math.random() * 160, 60 + Math.random() * 160, 14, 0, Math.PI * 2);
                    ctx.fill();
                }
                ctx.shadowBlur = 0;
            }

            ctx.beginPath();
            ctx.arc(140, 140, 108, 0, Math.PI * 2);
            ctx.fill();
        }

        const SYSTEM_PROMPTS = {
            academic: 'Voc√™ √© um consultor t√©cnico do TCC do Pablo Salvato. Seja objetivo e t√©cnico sobre anatexia, granadas Grt1/Grt2 e trajet√≥ria P-T.',
            kids: 'Voc√™ √© a Dona Granada, uma pedra divertida de 600 milh√µes de anos. Fale com linguagem simples e emojis.'
        };

        async function askGemini(mode) {
            const input = document.getElementById(`${mode}-chat-input`);
            const output = document.getElementById(`${mode}-chat-output`);
            const text = input.value.trim();
            if (!text) return;

            const uDiv = document.createElement('div');
            uDiv.className = 'user-msg chat-message';
            uDiv.innerText = text;
            output.appendChild(uDiv);
            input.value = '';
            output.scrollTop = output.scrollHeight;

            const loading = document.createElement('div');
            loading.className = 'ai-msg chat-message typing-indicator';
            loading.innerText = '...';
            output.appendChild(loading);

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text }] }],
                        systemInstruction: { parts: [{ text: SYSTEM_PROMPTS[mode] }] }
                    })
                });

                const data = await response.json();
                output.removeChild(loading);
                const aiDiv = document.createElement('div');
                aiDiv.className = 'ai-msg chat-message';
                aiDiv.innerText = data?.candidates?.[0]?.content?.parts?.[0]?.text || 'N√£o consegui responder agora.';
                output.appendChild(aiDiv);
                output.scrollTop = output.scrollHeight;
            } catch (error) {
                loading.innerText = 'Erro de conex√£o.';
            }
        }

        new Chart(document.getElementById('mineralChart'), {
            type: 'bar',
            data: {
                labels: ['Prot√≥lito', 'Pico metam√≥rfico', 'Retro'] ,
                datasets: [{ label: 'Granada (%)', data: [0, 25, 20], backgroundColor: ['#4d5da0', '#ff7e9f', '#ffb067'] }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { labels: { color: '#e9ecff' } } },
                scales: {
                    x: { ticks: { color: '#cdd5ff' }, grid: { color: 'rgba(233,236,255,0.08)' } },
                    y: { ticks: { color: '#cdd5ff' }, grid: { color: 'rgba(233,236,255,0.08)' } }
                }
            }
        });

        new Chart(document.getElementById('ptPathChart'), {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Trajet√≥ria P-T',
                    data: [{ x: 400, y: 3 }, { x: 800, y: 7.5 }, { x: 700, y: 4.5 }],
                    borderColor: '#7c8cff',
                    backgroundColor: '#ff7e9f',
                    pointRadius: 5,
                    showLine: true,
                    tension: 0.25
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { labels: { color: '#e9ecff' } } },
                scales: {
                    x: {
                        title: { display: true, text: 'Temperatura (¬∞C)', color: '#e9ecff' },
                        ticks: { color: '#cdd5ff' },
                        grid: { color: 'rgba(233,236,255,0.08)' }
                    },
                    y: {
                        title: { display: true, text: 'Press√£o (kbar)', color: '#e9ecff' },
                        ticks: { color: '#cdd5ff' },
                        grid: { color: 'rgba(233,236,255,0.08)' }
                    }
                }
            }
        });

        atualizarSimulacao();
    </script>
</body>
</html>
